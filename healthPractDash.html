<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Doctor Dashboard</title>
  <link rel="stylesheet" href="healthPractDash.css" />

   <!-- Firebase App -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<!-- Firestore -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<!-- Authentication (optional for login system) -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

</head>
<body>
  <div class="container">
    <aside class="sidebar">
      <h2 class="clinic-title">Vaal Clinic 
        <br> User: Dr Tseka
      </h2>
      <nav>
        <ul>
          <li onclick="showAllPatients()">ðŸ©º Patient Records</li>
          <li><a href="patientRegistration.html">âž• Add New Patient</a></li>
        </ul>
      </nav>
    </aside>

    <main class="content">
      <h2>Patient Records</h2>
      <div id="patient-list"></div>
    </main>
  </div>

 

<script>
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT.firebaseapp.com",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_PROJECT.appspot.com",
    messagingSenderId: "YOUR_SENDER_ID",
    appId: "YOUR_APP_ID"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
</script>


  <script>
    let patients = [
      {
        name: "Junior",
        surname: "Tseka",
        idNumber: "990101125551",
        email: "studentJA@vut.com",
        contact: "064662346",
        gender: "Male",
        condition: "Flu",
        prescription: "Paracetamol 500mg"
      },
      {
        name: "Kgaugelo",
        surname: "Masemola",
        idNumber: "8905055678099",
        email: "KayGa@Sonke.com",
        contact: "0839876543",
        gender: "Male",
        condition: "Asthma",
        prescription: "Ventolin Inhaler"
      }
    ];

    function censorId(id) {
      return id.slice(0, 3) + '********' + id.slice(-2);
    }

    function showAllPatients() {
      const list = document.getElementById("patient-list");
      list.innerHTML = "";

      const table = document.createElement("table");
      table.className = "patient-table";
      table.innerHTML = `
        <thead>
          <tr>
            <th>Name</th>
            <th>Surname</th>
            <th>ID Number</th>
            <th>Email</th>
            <th>Contact</th>
            <th>Gender</th>
            <th>Condition</th>
            <th>Prescription</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          ${patients.map((p, i) => `
            <tr id="row-${i}">
              <td><span class="text">${p.name}</span><input class="edit" type="text" value="${p.name}" style="display:none"></td>
              <td><span class="text">${p.surname}</span><input class="edit" type="text" value="${p.surname}" style="display:none"></td>
              <td>${censorId(p.idNumber)}</td>
              <td><span class="text">${p.email}</span><input class="edit" type="text" value="${p.email}" style="display:none"></td>
              <td><span class="text">${p.contact}</span><input class="edit" type="text" value="${p.contact}" style="display:none"></td>
              <td><span class="text">${p.gender}</span>
                <select class="edit" style="display:none">
                  <option ${p.gender === 'Male' ? 'selected' : ''}>Male</option>
                  <option ${p.gender === 'Female' ? 'selected' : ''}>Female</option>
                </select>
              </td>
              <td><span class="text">${p.condition || ''}</span><input class="edit" type="text" value="${p.condition || ''}" style="display:none"></td>
              <td><span class="text">${p.prescription || ''}</span><input class="edit" type="text" value="${p.prescription || ''}" style="display:none"></td>
              <td>
                <button onclick="editRow(${i})" class="edit-btn">Edit</button>
                <button onclick="saveRow(${i})" class="save-btn" style="display:none">Save</button>
                <button onclick="deleteRow(${i})" class="delete-btn">Delete</button>
              </td>
            </tr>
          `).join('')}
        </tbody>
      `;
      list.appendChild(table);
    }

    function editRow(index) {
      const row = document.getElementById(`row-${index}`);
      row.querySelectorAll(".text").forEach(el => el.style.display = "none");
      row.querySelectorAll(".edit").forEach(el => el.style.display = "inline-block");
      row.querySelector(".edit-btn").style.display = "none";
      row.querySelector(".save-btn").style.display = "inline-block";
    }

    function saveRow(index) {
      const row = document.getElementById(`row-${index}`);
      const inputs = row.querySelectorAll(".edit");

      patients[index].name = inputs[0].value;
      patients[index].surname = inputs[1].value;
      patients[index].email = inputs[2].value;
      patients[index].contact = inputs[3].value;
      patients[index].gender = inputs[4].value;
      patients[index].condition = inputs[5].value;
      patients[index].prescription = inputs[6].value;

      showAllPatients();
    }

    function deleteRow(index) {
      if (confirm("Are you sure you want to delete this patient?")) {
        patients.splice(index, 1);
        showAllPatients();
      }
    }

    showAllPatients();
  </script>
</body>
</html>
